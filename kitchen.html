<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Kitchen Dashboard - Smart Restaurant</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      /* Updated Professional Theme Colors */
      --primary:#3b82f6;        /* Blue */
      --success:#10b981;        /* Teal Green */
      --warning:#f59e0b;        /* Amber */
      --danger:#ef4444;         /* Red */

      --bg:#0d1220;             /* Deep Navy */
      --card:#1b2433;           /* Dark Card */
      --border:#3b4353;         /* Soft Grey Border */
      --text:#f1f5f9;           /* Light Text */
      --text-muted:#94a3b8;     /* Muted Gray */
    }

    *{
      box-sizing:border-box;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      margin:0;
      padding:0;
    }

    body{
      background:linear-gradient(135deg,#0f172a 0%,#1e293b 45%,#3b4c63 100%);
      min-height:100vh;
      color:var(--text);
    }

    nav{
      background:linear-gradient(90deg,#0d1220,#1b2433);
      padding:15px 25px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:0 4px 20px rgba(0,0,0,0.3);
      backdrop-filter:blur(10px);
    }

    .brand{font-size:22px;font-weight:700;}

    .nav-links a{
      color:var(--text);
      text-decoration:none;
      padding:10px 20px;
      border-radius:12px;
      transition:0.2s;
      margin-left:10px;
    }
    .nav-links a:hover{
      background:rgba(59,130,246,0.2);
      color:var(--primary);
    }

    .container{max-width:1400px;margin:0 auto;padding:30px 25px;}

    .header{
      background:linear-gradient(135deg,var(--card),#2a3447);
      padding:30px;
      border-radius:24px;
      margin-bottom:30px;
      box-shadow:0 20px 50px rgba(0,0,0,0.4);
      border:1px solid var(--border);
    }

    .header-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:15px;
    }

    .header h1{font-size:34px;margin:0;color:var(--text);}
    .header-subtitle{font-size:16px;color:var(--text-muted);}

    .status-badge{
      padding:8px 20px;
      border-radius:50px;
      background:rgba(59,130,246,0.15);
      color:var(--primary);
      font-weight:700;
    }

    .stats-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:20px;
      margin-bottom:30px;
    }

    .stat-card{
      background:var(--card);
      padding:25px;
      border-radius:20px;
      text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,0.2);
      border:1px solid var(--border);
      transition:0.3s;
    }

    .stat-card:hover{transform:translateY(-5px);}

    .stat-number{
      font-size:32px;
      font-weight:800;
      color:var(--primary);
    }

    .stat-label{font-size:14px;color:var(--text-muted);}

    .kitchen-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
      gap:25px;
    }

    .order-card{
      background:linear-gradient(145deg,var(--card),#2c3749);
      border-radius:24px;
      padding:25px;
      border:1px solid var(--border);
      box-shadow:0 15px 40px rgba(0,0,0,0.3);
      transition:0.3s;
      position:relative;
      overflow:hidden;
    }

    .order-card::before{
      content:'';
      position:absolute;
      top:0;left:0;right:0;
      height:4px;
      background:linear-gradient(90deg,var(--primary),var(--success));
    }

    .order-card:hover{
      transform:translateY(-8px);
      box-shadow:0 25px 60px rgba(0,0,0,0.4);
    }

    .order-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:20px;
    }

    .table-id{font-size:28px;font-weight:800;color:var(--text);}

    .order-status{
      padding:8px 16px;
      border-radius:20px;
      font-size:13px;
      font-weight:700;
      min-width:100px;
      text-align:center;
    }

    .status-Occupied{
      background:rgba(245,158,11,0.18);
      color:#fbbf24;
    }

    .status-Cleaning{
      background:rgba(239,68,68,0.18);
      color:var(--danger);
    }

    .order-details{margin-bottom:20px;}

    .detail-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 0;
      border-bottom:1px solid var(--border);
    }

    .detail-label{font-size:14px;color:var(--text-muted);}

    .dishes-list{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:25px;
    }

    .dish-item{
      background:rgba(59,130,246,0.15);
      padding:10px 15px;
      border-radius:15px;
      font-size:14px;
      font-weight:600;
      color:var(--primary);
    }

    .action-buttons{display:flex;gap:12px;}

    .btn{
      flex:1;padding:12px;border-radius:12px;border:0;
      cursor:pointer;font-weight:600;font-size:14px;
      transition:0.2s;display:flex;align-items:center;
      justify-content:center;gap:8px;
    }

    .btn-cleaning{
      background:rgba(245,158,11,0.18);
      color:#f59e0b;
      border:1px solid rgba(245,158,11,0.3);
    }

    .btn-ready{
      background:var(--success);
      color:#fff;
      box-shadow:0 4px 15px rgba(16,185,129,0.4);
    }

    .btn:hover{transform:translateY(-2px);}

    .empty-state{
      grid-column:1/-1;
      text-align:center;
      padding:60px 40px;
      background:var(--card);
      border-radius:24px;
      border:2px dashed var(--border);
    }

    .empty-icon{font-size:64px;color:var(--text-muted);margin-bottom:20px;}

    .toast-container{
      position:fixed;top:25px;right:25px;
      z-index:1000;display:flex;flex-direction:column;
      gap:15px;
    }

    .toast{
      background:linear-gradient(90deg,#0d1220,#1b2433);
      color:var(--text);
      padding:18px 25px;
      border-radius:16px;
      box-shadow:0 20px 50px rgba(0,0,0,0.4);
      font-size:15px;
      animation:toastSlide 0.4s ease;
      max-width:400px;
      border:1px solid var(--border);
    }

    @keyframes toastSlide{
      from{transform:translateX(100%);opacity:0;}
      to{transform:translateX(0);opacity:1;}
    }

    @media(max-width:768px){
      .kitchen-grid{grid-template-columns:1fr;}
      .action-buttons{flex-direction:column;}
    }
  </style>
</head>

<body>
  <nav>
    <div class="brand">üç≥ Smart Restaurant - Kitchen</div>
    <div class="nav-links">
      <a href="index.html">üè† Home</a>
      <a href="waiter.html">üë®‚Äçüç≥ Waiter</a>
      <a href="login.html">Logout</a>
    </div>
  </nav>

  <div class="container">
    <div class="header">
      <div class="header-top">
        <div>
          <h1>Kitchen Dashboard</h1>
          <div class="header-subtitle">Real-time orders from waiter ‚Ä¢ Auto-sync</div>
        </div>
        <div class="status-badge" id="liveCount">0 Live Orders</div>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="totalOrders">0</div>
        <div class="stat-label">Active Orders</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalDishes">0</div>
        <div class="stat-label">Dishes Pending</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="tablesCooking">0</div>
        <div class="stat-label">Tables Cooking</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="avgTime">0m</div>
        <div class="stat-label">Avg Prep Time</div>
      </div>
    </div>

    <div class="kitchen-grid" id="kitchenGrid"></div>
  </div>

  <div class="toast-container" id="toastContainer"></div>

<script>
  function loadTables() {
    return JSON.parse(localStorage.getItem('tablesState')) || [];
  }

  function saveTables(tables) {
    localStorage.setItem('tablesState', JSON.stringify(tables));
  }

  function toast(msg) {
    const container = document.getElementById('toastContainer');
    const t = document.createElement('div');
    t.className = 'toast';
    t.textContent = `üç≥ ${msg}`;
    container.appendChild(t);
    setTimeout(() => t.remove(), 4000);
  }

  function updateStats() {
    const tables = loadTables();
    const activeOrders = tables.filter(t => t.status === 'Occupied' || t.status === 'Cleaning');

    document.getElementById('totalOrders').textContent = activeOrders.length;
    document.getElementById('liveCount').textContent = `${activeOrders.length} Live Orders`;

    let totalDishes = 0;
    let cookingTables = tables.filter(t => t.status === 'Cleaning').length;

    activeOrders.forEach(table => {
      totalDishes += table.dishes.reduce((sum, dish) => sum + dish.qty, 0);
    });

    document.getElementById('totalDishes').textContent = totalDishes;
    document.getElementById('tablesCooking').textContent = cookingTables;
    document.getElementById('avgTime').textContent = '2-5m';
  }

  function renderKitchen() {
    const grid = document.getElementById('kitchenGrid');
    const tables = loadTables();

    const pendingOrders = tables.filter(t => t.status === 'Occupied' || t.status === 'Cleaning');

    if (pendingOrders.length === 0) {
      grid.innerHTML = `
        <div class="empty-state">
          <div class="empty-icon">üçΩÔ∏è</div>
          <h3 style="margin-bottom:15px;color:var(--text);">No Pending Orders</h3>
          <p style="color:var(--text-muted);">All tables are ready or available. Great job team! üëè</p>
        </div>
      `;
      return;
    }

    grid.innerHTML = pendingOrders.map(table => `
      <div class="order-card" data-table-id="${table.id}">
        <div class="order-header">
          <div>
            <div class="table-id">${table.id}</div>
            <div style="font-size:14px;color:var(--text-muted);margin-top:4px;">
              ${table.section} ‚Ä¢ ${table.capacity} seats
            </div>
          </div>
          <div class="order-status status-${table.status}">${table.status}</div>
        </div>
        
        <div class="order-details">
          <div class="detail-row">
            <span class="detail-label">Customer:</span>
            <span style="font-weight:600;">${table.notes || 'Walk-in'}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Dishes:</span>
            <span style="font-weight:600;">${table.dishes.reduce((sum, d) => sum + d.qty, 0)}</span>
          </div>
          <div class="detail-row" style="border-bottom:none;">
            <span class="detail-label">Order Time:</span>
            <span style="font-weight:600;">${new Date(table.time).toLocaleTimeString()}</span>
          </div>
        </div>
        
        <div class="dishes-list">
          ${table.dishes.map(dish => `
            <div class="dish-item">
              üçõ ${dish.name} 
              <span style="font-weight:700;margin-left:8px;">√ó${dish.qty}</span>
            </div>
          `).join('')}
        </div>
        
        <div class="action-buttons">
          <button class="btn btn-cleaning" onclick="updateTableStatus('${table.id}', 'Cleaning')">
            üßπ Mark Cleaning
          </button>
          <button class="btn btn-ready" onclick="updateTableStatus('${table.id}', 'Available')">
            ‚úÖ Ready for Next
          </button>
        </div>
      </div>
    `).join('');

  }

  function updateTableStatus(tableId, status) {
    const tables = loadTables();
    const table = tables.find(t => t.id === tableId);

    if (!table) return;

    table.status = status;
    if (status === 'Available') {
      table.notes = '';
      table.dishes = [];
    }
    table.time = Date.now();

    saveTables(tables);
    renderKitchen();
    updateStats();

    toast(status === 'Cleaning' ? 
      `Table ${tableId} moved to Cleaning` : 
      `Table ${tableId} ready for next customer!`
    );
  }

  function autoRefresh() {
    renderKitchen();
    updateStats();
  }

  autoRefresh();
  setInterval(autoRefresh, 3000);
</script>

</body>
</html>

